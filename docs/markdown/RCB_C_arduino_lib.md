> ğŸ author: richie bao ğŸ“… Jun 6, 2018
# 09_Arudinoåº“

> å®éªŒå™¨æï¼šArduino UNO(1)ï¼Œé¢åŒ…æ¿(1)ï¼Œç”µé˜»(10kÎ©(4ï¼Œä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»))ï¼ŒGY-521ä¸‰è½´åŠ é€Ÿåº¦è®¡ç”µå­é™€èºä»ª(1)ï¼ŒAT24C64 EEPROMå­˜å‚¨å™¨(1)ï¼ŒOLEDæ˜¾ç¤ºå±(1)ï¼ŒTiny RTC I2Cå¯å……ç”µç”µæ± DS1307èŠ¯ç‰‡æ—¶é’Ÿæ¨¡å—(1)

[Libraries](https://www.arduino.cc/en/Reference/Libraries)-Standard Libraries

Libraries-Contributed Libraries

Installing Additional Arduino Libraries

<img src="./imgs/0139.jpg" height="auto" width="auto"  title="digit-x">

<img src="./imgs/0140.jpg" height="auto" width="auto"  title="digit-x">


## GY-521ä¸‰è½´åŠ é€Ÿåº¦è®¡ç”µå­é™€èºä»ª
é€šå¸¸æ‰€è´­ç½®çš„å™¨ä»¶æ¨¡å—ï¼Œå‚å®¶éƒ½ä¼šæä¾›å¯¹åº”å•ç‰‡æœºçš„åº“ï¼Œå¾€å¾€åŒ…å«æ”¯æŒArduinoçš„åº“æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æä¾›ï¼Œéœ€è¦æŸ¥çœ‹Arduinoå®˜æ–¹æ˜¯å¦æœ‰æ‰€æä¾›ï¼Œä»¥åŠç›¸å…³æœç´¢ã€‚å¯¹äºè®¾è®¡ä¸“ä¸šï¼Œåœ¨éä¸å¾—å·²çš„æƒ…å†µä¸‹ä¸å»ºè®®è‡ªè¡Œç¼–å†™ï¼Œä»è€ŒèŠ‚çº¦æ—¶é—´æˆæœ¬ã€‚å¯ä»¥å°†åº“æ–‡ä»¶ç›´æ¥å¤åˆ¶åˆ°å®‰è£…ç›®å½•arduino-1.8.5/librariesä¸‹ã€‚åŒæ—¶ï¼Œå‚å®¶äº¦ä¼šæä¾›æ¡ˆä¾‹æ–‡ä»¶ï¼Œå­¦ä¹ æ–°æ¨¡å—çš„æœ€å¥½æ–¹æ³•æ˜¯ä»æ‰€æä¾›çš„æ¡ˆä¾‹æ–‡ä»¶å¼€å§‹ï¼Œä¾‹å¦‚GY-521ä¸‰è½´åŠ é€Ÿåº¦è®¡ç”µå­é™€èºä»ªã€‚

é¦–å…ˆé˜…è¯»å™¨ä»¶çš„æ‰‹å†Œ/è¯´æ˜ä¹¦ï¼Œæ˜ç¡®å¼•è„šã€ç²¾åº¦ã€ç”µè·¯å’Œç›¸å…³è¯´æ˜ã€‚å¹¶ä»ç®€å•çš„ç”µè·¯å¼€å§‹å®éªŒã€‚
### ç”µè·¯å›¾(GY-521é™€èºä»ª)
<img src="./imgs/0141.jpg" height="auto" width="auto"  title="digit-x">

**ç¨‹åº**

```c
// I2C device class (I2Cdev) demonstration Arduino sketch for MPU6050 class
// 10/7/2011 by Jeff Rowberg <jeff@rowberg.net>
// Updates should (hopefully) always be available at https://github.com/jrowberg/i2cdevlib
//
// Changelog:
//     2011-10-07 - initial release

/* ============================================
I2Cdev device library code is placed under the MIT license
Copyright (c) 2011 Jeff Rowberg

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
===============================================
*/

// Arduino Wire library is required if I2Cdev I2CDEV_ARDUINO_WIRE implementation
// is used in I2Cdev.h
#include "Wire.h"

// I2Cdev and MPU6050 must be installed as libraries, or else the .cpp/.h files
// for both classes must be in the include path of your project
#include "I2Cdev.h"
#include "MPU6050.h"

// class default I2C address is 0x68
// specific I2C addresses may be passed as a parameter here
// AD0 low = 0x68 (default for InvenSense evaluation board)
// AD0 high = 0x69
MPU6050 accelgyro;

int16_t ax, ay, az;
int16_t gx, gy, gz;

#define LED_PIN 13
bool blinkState = false;

void setup() {
    // join I2C bus (I2Cdev library doesn't do this automatically)
    Wire.begin();

    // initialize serial communication
    // (38400 chosen because it works as well at 8MHz as it does at 16MHz, but
    // it's really up to you depending on your project)
    Serial.begin(38400);

    // initialize device
    Serial.println("Initializing I2C devices...");
    accelgyro.initialize();

    // verify connection
    Serial.println("Testing device connections...");
    Serial.println(accelgyro.testConnection() ? "MPU6050 connection successful" : "MPU6050 connection failed");

    // configure Arduino LED for
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    // read raw accel/gyro measurements from device
    accelgyro.getMotion6(&ax, &ay, &az, &gx, &gy, &gz);

    // these methods (and a few others) are also available
    //accelgyro.getAcceleration(&ax, &ay, &az);
    //accelgyro.getRotation(&gx, &gy, &gz);

    // display tab-separated accel/gyro x/y/z values
    Serial.print("a/g:\t");
    Serial.print(ax); Serial.print("\t");
    Serial.print(ay); Serial.print("\t");
    Serial.print(az); Serial.print("\t");
    Serial.print(gx); Serial.print("\t");
    Serial.print(gy); Serial.print("\t");
    Serial.println(gz);

    // blink LED to indicate activity
    blinkState = !blinkState;
    digitalWrite(LED_PIN, blinkState);
}
```

**è¿è¡Œç»“æœ**

```
a/g:	16668	-452	-392	-840	181	377
a/g:	16564	-352	-324	-819	180	356
a/g:	16656	-368	-392	-825	157	356
a/g:	16588	-440	-272	-814	149	398
a/g:	16604	-424	-320	-825	161	359
a/g:	16600	-416	-348	-836	174	380
a/g:	16652	-420	-328	-804	161	405
a/g:	16676	-356	-296	-839	169	369
a/g:	16764	-356	-288	-848	183	377
a/g:	16812	-464	-348	-813	177	382
a/g:	16720	-392	-352	-815	159	383
a/g:	16628	-404	-428	-807	133	400
a/g:	16600	-436	-308	-827	197	383
a/g:	16612	-400	-520	-820	166	364
a/g:	16664	-404	-252	-824	167	375
a/g:	16572	-392	-256	-845	166	360
a/g:	16592	-420	-280	-818	165	362
a/g:	16720	-408	-312	-798	175	365
a/g:	16608	-324	-220	-811	144	367
a/g:	16624	-400	-272	-829	171	378
a/g:	16576	-408	-476	-847	174	375
a/g:	16700	-352	-292	-824	167	384
a/g:	16696	-432	-216	-819	157	380
```
## I2Cé€šä¿¡
ä¸¤çº¿ä¸²è¡Œé€šä¿¡æ¥å£(I2C/TWI):TWIå­ç³»ç»Ÿå…è®¸ä½¿ç”¨ä¸¤çº¿äº’è¿çš„æ–¹æ¡ˆå°†ä¸€ç³»åˆ—ç›¸å…³è®¾å¤‡ï¼Œå¦‚å¾®æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨ã€æ˜¾ç¤ºå™¨ã€è®°å¿†å­˜å‚¨å™¨ç­‰è®¾å¤‡ï¼Œä»¥ç½‘ç»œçš„å½¢å¼è¿æ¥åœ¨åŒä¸€ç³»ç»Ÿä¸­ã€‚TWIæ¥å£æœ€å¤§èƒ½åŒæ—¶è¿æ¥128ä¸ªè®¾å¤‡ã€‚å…¶ä¸­æ¯ä¸ªè®¾å¤‡å…·å¤‡ç‹¬ç«‹çš„è®¾å¤‡åœ°å€ï¼Œå¹¶ä¸”èƒ½åœ¨ä¸¤çº¿çš„æ€»çº¿ä¸Šä»¥é«˜è¾¾400kHzçš„é€Ÿç‡è¿›è¡Œé€šä¿¡ã€‚å› æ­¤å¯ä»¥é€šè¿‡TWIæ¥å£è®¾å¤‡ä¹‹é—´åœ¨å°èŒƒå›´çš„ç½‘ç»œä¸­è‡ªç”±äº¤æ¢æ•°æ®ã€‚
> I2Cçš„é€šä¿¡æœºåˆ¶éƒ¨åˆ†ä½œä¸ºäº†è§£ï¼Œæœ‰åŠ©äºç†è§£å’Œä½¿ç”¨ã€‚

TWI(2-wire Serial Interfaceï¼Œâ…ˆ^2
* ä¸»æœºï¼šèƒ½äº§ç”ŸTWIæ€»çº¿çš„SCLæ—¶é’Ÿä¿¡å·ï¼Œæ§åˆ¶å¯åŠ¨å’Œåœæ­¢ä¼ è¾“çš„å™¨ä»¶ï¼›
* ä»æœºï¼šå’Œä¸»æœºè¿›è¡Œæ•°æ®äº¤æ¢çš„å™¨ä»¶ï¼Œä»æœºä¸èƒ½ä¸»åŠ¨å‘èµ·æ•°æ®ä¼ è¾“ä»¥åŠäº§ç”Ÿæ—¶é’Ÿä¿¡å·ï¼›
* å‘é€å™¨ï¼šå‘TWIæ€»çº¿æä¾›æ•°æ®çš„å™¨ä»¶ï¼›
* æ¥æ”¶å™¨ï¼šä»TWIæ€»çº¿ä¸Šè¯»å–æ•°æ®çš„å™¨ä»¶ï¼›
* å¤šä¸»æœºï¼šåŒä¸€æ¡TWIæ€»çº¿ä¸Šæœ‰å¤šä¸ªå¯èƒ½ä¼šåŒæ—¶ä½¿ç”¨æ€»çº¿çš„ä¸»æœºï¼›
* ä¸»å™¨ä»¶åœ°å€ï¼šä¸»æœºçš„å†…éƒ¨åœ°å€ï¼Œæ¯ä¸€ç§ä¸»å™¨ä»¶æœ‰å…¶ç‰¹å®šä¸”å”¯ä¸€çš„ä¸»å™¨ä»¶åœ°å€ï¼›
* ä»å™¨ä»¶åœ°å€ï¼šä»æœºçš„å†…éƒ¨åœ°å€ï¼Œæ¯ä¸€ç§ä»å™¨ä»¶æœ‰å…¶ç‰¹å®šä¸”å”¯ä¸€çš„ä»å™¨ä»¶åœ°å€ï¼›
* ä»²è£è¿‡ç¨‹ï¼šå½“åŒæ—¶æœ‰å¤šä¸ªä¸»æœºå°è¯•æ“ä½œæ€»çº¿æ—¶ï¼ŒTWIæ€»çº¿ä½¿å¾—å…¶ä¸­ä¸€ä¸ªä¸»æœºè·å¾—æ€»çº¿çš„ä½¿ç”¨æƒï¼ŒåŒæ—¶å¹¶ä¸ç ´åæŠ¥æ–‡çš„è¿‡ç¨‹ï¼›
* åŒæ­¥è¿‡ç¨‹ï¼šä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå™¨ä»¶åŒæ­¥æ—¶é’Ÿä¿¡å·çš„è¿‡ç¨‹ã€‚

<img src="./imgs/0142.jpg" height="auto" width="auto"  title="digit-x">

TWIæ€»çº¿ç”±æ—¶é’Ÿçº¿SCLå’Œæ•°æ®çº¿SDAç»„æˆã€‚ä¸€èˆ¬TWIæ€»çº¿ä¸Šè¿æ¥çš„å™¨ä»¶æ˜¯æ¼ææˆ–é›†ç”µæå¼€è·¯ç»“æ„ï¼Œå› æ­¤ä¸¤æ ¹æ€»çº¿å‡éœ€è¦é€šè¿‡ç”µé˜»ä¸Šæ‹‰åˆ°Vccï¼Œç¡®ä¿æ€»çº¿ä¸Šä»»æ„ä¸€ä¸ªå™¨ä»¶åœ¨è¾“å‡ºä½ç”µå¹³æ—¶ä¼šå°†æ€»çº¿æ‹‰ä½ï¼Œå®ç°"çº¿ä¸"ï¼Œå³TWIæ€»çº¿ä¸Šçš„æ—¶é’Ÿä¿¡å·SCLæ˜¯ç”±æ‰€æœ‰æŒ‚æ¥åœ¨è¯¥ä¿¡å·çº¿ä¸Šå™¨ä»¶çš„SCLä¿¡å·è¿›è¡Œé€»è¾‘"ä¸"äº§ç”Ÿã€‚å½“è¿™äº›å™¨ä»¶ä¸­ä»»ä½•ä¸€ä¸ªSCLå¼•è„šçš„ç”µå¹³è¢«æ‹‰ä½ä¹‹åï¼ŒSCLä¿¡å·å°†ä¸€ç›´ä¿æŒä½ç”µå¹³ï¼Œå½“æ‰€æœ‰å™¨ä»¶çš„SCLå¼•è„šéƒ½æ¢å¤åˆ°é«˜ç”µå¹³ä¹‹åï¼ŒSCLæ€»çº¿æ‰èƒ½æ¢å¤ä¸ºé«˜ç”µå¹³çŠ¶æ€ï¼Œå› æ­¤æ€»çº¿ä¸ŠSCLæ—¶é’Ÿä¿¡å·é•¿åº¦ç”±ç»´æŒç”µå¹³æ—¶é—´æœ€é•¿çš„å™¨ä»¶å†³å®šã€‚åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…ï¼Œç¬¬ä¸€ä¸ªSCLå¼•è„šè¢«æ‹‰ä½çš„å™¨ä»¶åˆå†æ¬¡å°†SCLæ€»çº¿æ‹‰ä½ï¼Œå½¢æˆè¿ç»­çš„SCLæ—¶é’Ÿä¿¡å·ã€‚

TWIæ€»çº¿å·¥ä½œåœ¨7ä½åœ°å€æ¨¡å¼æ—¶ï¼Œå¯ä»¥æŒ‚æ¥2^7=128ä¸ªå™¨ä»¶ï¼Œæ¯ä¸ªå™¨ä»¶å‡æœ‰å”¯ä¸€çš„åœ°å€ã€‚
### TWIæ€»çº¿æ•°æ®ä¼ è¾“æ ¼å¼
#### ä¼ è¾“ä½(Transferring Bits)
TWIæ€»çº¿åè®®è§„å®šæ€»çº¿ä¸Šè¿›è¡Œæ•°æ®ä½ä¼ è¾“æ—¶éœ€è¦ä¸æ—¶é’Ÿè„‰å†²åŒæ­¥ã€‚åœ¨æ•°æ®ä¼ é€è¿‡ç¨‹ä¸­ï¼Œå½“æ—¶é’Ÿçº¿ä¸ºé«˜ç”µå¹³æ—¶ï¼Œæ•°æ®çº¿ä¸Šçš„ç”µå¹³å¿…éœ€ä¿æŒç¨³å®šã€‚
<img src="./imgs/0143.jpg" height="auto" width="auto"  title="digit-x">

#### èµ·å§‹å’Œåœæ­¢æ¡ä»¶(START and STOP Conditions)
TWIæ€»çº¿åè®®è§„å®šåœ¨æ—¶é’Ÿçº¿SCLä¸ºé«˜ç”µå¹³æ—¶ï¼Œæ•°æ®çº¿SDAä»é«˜ç”µå¹³å‘ä½ç”µå¹³çš„è·³å˜è¢«å®šä¹‰ä¸ºèµ·å§‹æ¡ä»¶ã€‚å½“æ—¶é’Ÿçº¿SCLä¸ºé«˜ç”µå¹³æ—¶ï¼Œæ•°æ®çº¿SDAä»ä½ç”µå¹³å‘é«˜ç”µå¹³çš„è·³å˜è¢«å®šä¹‰ä¸ºåœæ­¢æ¡ä»¶ã€‚é‡å¤èµ·å§‹æ¡ä»¶çš„å®šä¹‰ä¸èµ·å§‹æ¡ä»¶çš„å®šä¹‰åŒã€‚

TWIæ€»çº¿ä¸Šæ•°æ®ä¼ è¾“éƒ½æ˜¯ä»¥ä¸»æœºäº§ç”Ÿçš„èµ·å§‹æ¡ä»¶(START)å¼€å§‹ï¼Œå·²ä¸»æœºäº§ç”Ÿçš„åœæ­¢æ¡ä»¶(STOP)ç»ˆæ­¢ã€‚åœ¨èµ·å§‹æ¡ä»¶ä¹‹åTWIæ€»çº¿è¢«è®¤ä¸ºè¿›å…¥äº†å¿™çŠ¶æ€ã€‚æœ‰æ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªèµ·å§‹æ¡ä»¶ä¹‹åï¼Œå†äº§ç”Ÿä¸€ä¸ªèµ·å§‹æ¡ä»¶ï¼Œä¸ºé‡å¤èµ·å§‹æ¡ä»¶(REPEATED START)ã€‚åŒæ ·ï¼Œå½“é‡å¤èµ·å§‹æ¡ä»¶ä¹‹åï¼Œæ€»çº¿ä»ç„¶è¢«è®¤å®šä¸ºå¿™çŠ¶æ€ã€‚
<img src="./imgs/0144.jpg" height="auto" width="auto"  title="digit-x">

#### åœ°å€å¸§æ ¼å¼(Address Packet Format)
TWI æ€»çº¿åè®®è§„å®šä¸€ä¸ªåœ°å€å¸§ç”±9ä½æ„æˆï¼ŒåŒ…å«7ä½çš„ä»å™¨ä»¶åœ°å€ã€1ä½è¯»å†™æ§åˆ¶ä½å’Œ1ä½åº”ç­”ä½ã€‚ä¸»æœºé¦–å…ˆå°†7ä½çš„ä»å™¨ä»¶åœ°å€æŒ‰é«˜ä½åœ¨å‰ï¼Œä½ä½åœ¨åçš„é¡ºåºä¾æ¬¡æ”¾ç½®åœ¨æ€»çº¿ä¸Šï¼Œç„¶åä¸»æœºå‘é€ä¸€ä¸ªè¯»å†™æ§åˆ¶ä½ï¼Œè¯»å†™æ§åˆ¶ä½ä¸º1æ—¶ï¼Œè¡¨ç¤ºæ¥ä¸‹æ¥ä¸»æœºè¦å¯¹ä»æœºè¿›è¡Œè¯»æ“ä½œï¼Œè€Œå½“è¯»å†™æ§åˆ¶ä½ä¸º0æ—¶ï¼Œåˆ™ä¸ºå†™æ“ä½œã€‚ä»æœºåœ¨æ£€æµ‹åˆ°è‡ªèº«è¢«å¯»å€åï¼Œåœ¨ç¬¬9ä¸ªæ—¶é’Ÿå‘¨æœŸå¼€å§‹å‰å°†SDAçº¿æ‹‰ä½åšå‡ºåº”ç­”(ACK)ã€‚

7ä½åœ°å€å¯ä»¥ç”±ç”¨æˆ·å®šä¹‰ï¼Œä½†æ˜¯ä»æœºåœ°å€0000 000æ˜¯ç³»ç»Ÿçš„ä¿ç•™åœ°å€ï¼Œè¯¥åœ°å€æ˜¯ä½œä¸ºå¹¿æ’­å‘¼å«åœ°å€ä½¿ç”¨ï¼Œå½“ä¸»æœºéœ€è¦å‘é€ç›¸åŒçš„ä¿¡æ¯ç»™æ€»çº¿ä¸Šæ‰€æœ‰çš„ä»å™¨ä»¶æ—¶ï¼Œå³å¯ä»¥ä½¿ç”¨å¹¿æ’­å‘¼å«åŠŸèƒ½ã€‚å½“ä¸»æœºå‘é€0000 000+0æ—¶ï¼Œè¡¨ç¤ºè¦å¯¹æ€»çº¿ä¸Šæ‰€æœ‰ä»å™¨ä»¶è¿›è¡Œå†™æ“ä½œï¼Œæ‰€æœ‰ä»å™¨ä»¶éƒ½ä¼šåœ¨ç¬¬9ä¸ªæ—¶é’Ÿåˆ°æ¥å‰å°†SDAçº¿æ‹‰ä½åšå‡ºåº”ç­”ï¼Œå¹¶ä¸”ä¼šå°†ä¸»æœºéšåå‘ç”Ÿçš„æ•°æ®å†™å…¥å™¨ä»¶å†…éƒ¨ã€‚ä¸»æœºå‘é€0000 000+1ï¼Œåˆ™æ˜¯å¯¹æ‰€æœ‰å™¨ä»¶è¿›è¡Œè¯»æ“ä½œï¼Œæ˜¯æ— æ„ä¹‰çš„ï¼Œå› æ­¤åœ°å€æ“ä½œæ— æ•ˆã€‚æ­¤å¤–ï¼Œä»æœºåœ°å€1111 xxxä¸ºä¿ç•™åœ°å€ï¼Œæœªè¢«å®šä¹‰ä¹Ÿä¸èƒ½ä½¿ç”¨ã€‚
<img src="./imgs/0145.jpg" height="auto" width="auto"  title="digit-x">

#### æ•°æ®å¸§æ ¼å¼(Data Packet Format)
TWIæ€»çº¿ä¸Šä¸€ä¸ªæ•°æ®å¸§ç”±9ä½æ„æˆï¼ŒåŒ…æ‹¬8ä¸ªæ•°æ®ä½ã€1ä¸ªåº”ç­”ä½ã€‚æ•°æ®çš„é«˜ä½åœ¨å‰ï¼Œä½ä½åœ¨åã€‚æ€»çº¿ä¸Šå‘é€æ•°æ®çš„ä¸€æ–¹ä¸ºå‘ç”Ÿå™¨ï¼Œæ¥æ”¶æ•°æ®ä¸€æ–¹ä¸ºæ¥æ”¶å™¨ã€‚å½“8ä½æ•°æ®å‘é€å®Œæ¯•ï¼Œæ¥æ”¶å™¨ç¬¬9ä¸ªæ—¶é’Ÿåˆ°æ¥å‰æ‹‰ä½SDAçº¿ä»¥äº§ç”Ÿåº”ç­”å‹å·(ACK)ã€‚å½“æ¥æ”¶å™¨ç”±äºæŸç§åŸå› ä¸èƒ½ç»§ç»­æ¥æ”¶æ•°æ®æ—¶ï¼Œå¯ä»¥åœ¨ç¬¬9ä¸ªæ—¶é’Ÿåˆ°æ¥æ—¶ä¸æ‹‰ä½SDAçº¿ï¼Œå³äº§ç”Ÿä¸€ä¸ªéåº”ç­”(NACK)ä¿¡å·ï¼Œä»¥æ­¤é€šçŸ¥å‘ç”Ÿå™¨ä¸è¦ç»§ç»­å‘é€æ•°æ®ã€‚
<img src="./imgs/0146.jpg" height="auto" width="auto"  title="digit-x">

#### åœ°å€+æ•°æ®çš„å‘é€(Combining Address and Data Packets into a Transmission)
åŸºæœ¬ä¼ è¾“åŒ…æ‹¬èµ·å§‹æ¡ä»¶ã€ä»å™¨ä»¶åœ°å€ã€R/Wä½ã€è‡³å°‘ä¸€ä¸ªæ•°æ®åŒ…ä»¥åŠä¸€ä¸ªåœæ­¢æ¡ä»¶æ„æˆã€‚åœ¨æ•°æ®ä¼ é€æ—¶ï¼Œä¸»æœºé¦–å…ˆå‘é€èµ·å§‹æ¡ä»¶ï¼Œå¯åŠ¨æœ¬æ¬¡æ•°æ®ä¼ è¾“ï¼Œç„¶åä¸»æœºå‘é€è¦å¯»å€çš„ä»å™¨ä»¶åœ°å€ä¸R/Wä½ã€‚ä»æœºè¢«å¯»å€åï¼Œåœ¨åœ°9ä¸ªæ—¶é’Ÿåˆ°æ¥æ—¶å°†SDAçº¿æ‹‰ä½ï¼Œäº§ç”Ÿåº”ç­”ACKä¿¡å·ã€‚éšåï¼ŒæŒ‰ç…§ä¸»æœºå‘é€çš„åœ°å€åŒ…çš„è¯»å†™è¦æ±‚ï¼Œä»æœºå°†è‡ªèº«çš„æ•°æ®æ”¾åˆ°æ€»çº¿ä¸Šä¾›ä¸»æœºè¯»å–ï¼Œæˆ–è€…å°†ä¸»æœºå‘é€çš„æ•°æ®å†™å…¥ä»æœºå†…ã€‚æ— è®ºä¸»æœºå’Œä»æœºï¼Œåªè¦ä½œä¸ºæ¥æ”¶æ•°æ®çš„ä¸€æ–¹ï¼Œåœ¨æ•°æ®æ¥æ”¶å®Œæ¯•åéƒ½å°†ä¼šå°†SDAçº¿æ‹‰ä½äº§ç”Ÿä¸€ä¸ªåº”ç­”ACKä¿¡å·ã€‚

å½“ä¸»æœºæ—¶é’Ÿé¢‘ç‡è®¾å®šé«˜äºä»æœºæ‰€èƒ½æ¥å—çš„é€Ÿåº¦æé™æ—¶ï¼Œä»æœºä¼šåˆ©ç”¨æ€»çº¿"çº¿ä¸"ï¼Œåœ¨æ²¡æœ‰å®Œæˆæ•°æ®å“åº”æ—¶å°†SCLçº¿æ‹‰ä½ï¼Œä½¿æ—¶é’Ÿå› ä½ç”µå¹³æ—¶é—´å»¶é•¿è€Œé™ä½æ€»çº¿ä¸Šæ•°æ®ä¼ è¾“é€Ÿç‡ã€‚
<img src="./imgs/0147.jpg" height="auto" width="auto"  title="digit-x">

### TWIç»“æ„æ¡†å›¾
<img src="./imgs/0148.jpg" height="auto" width="auto"  title="digit-x">

### TWIæ€»çº¿æ¨¡å—ç¼–ç¨‹
<img src="./imgs/0149.jpg" height="auto" width="auto"  title="digit-x">

### TWIå¯„å­˜å™¨
<img src="./imgs/0150.jpg" height="auto" width="auto"  title="digit-x">

<img src="./imgs/0151.jpg" height="auto" width="auto"  title="digit-x">

## AT24C64 EEPROMå­˜å‚¨å™¨
ATmega328å¾®æ§åˆ¶å™¨(Arduino UNOæ ¸å¿ƒ)å—åˆ¶äºROMå­˜å‚¨å®¹é‡çš„é™åˆ¶ï¼Œå¦‚æœç¢°åˆ°å­˜å‚¨è¾ƒå¤šæ•°æ®æ—¶åˆ™ä¸èƒ½å¤Ÿå®ç°ç¨‹åºè¿è¡Œï¼Œä¾‹å¦‚æ–‡å­—æ•°æ®å’Œå›¾ç‰‡æ•°æ®ï¼Œæ­¤æ—¶éœ€è¦æ‰©å±•å®¹é‡ã€‚ä¸€ç§è¾ƒä¸ºç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨AT24C64å¤–ç½®EEPROMå­˜å‚¨å™¨ï¼Œå‹å·64çš„å­˜å‚¨å™¨å®¹é‡ï¼š64Kbitã€‚å…·ä½“å‚æ•°å¯ä»¥æŸ¥çœ‹Atmelçš„å®˜æ–¹æ‰‹å†Œã€‚
**Features**
* Low-Voltage and Standard-Voltage Operation
â€“ 2.7 (VCC = 2.7V to 5.5V)
â€“ 1.8 (VCC = 1.8V to 5.5V)
* Low-Power Devices (ISB = 2 ÂµA at 5.5V) Available
* Internally Organized 4096 x 8, 8192 x 8
* 2-Wire Serial Interface **æ”¯æŒiic**
* Schmitt Trigger, Filtered Inputs for Noise Suppression
* Bidirectional Data Transfer Protocol
* 100 kHz (1.8V, 2.5V, 2.7V) and 400 kHz (5V) Clock Rate
* Write Protect Pin for Hardware Data Protection
* 32-Byte Page Write Mode (Partial Page Writes Allowed)
* Self-Timed Write Cycle (10 ms max)
*  High Reliability
â€“ Endurance: 1 Million Write Cycles
â€“ Data Retention: 100 Years
*  Automotive Grade and Extended Temperature Devices Available
* 8-Pin JEDEC PDIP, 8-Pin JEDEC SOIC, 8-Pin EIAJ SOIC,and 8-pin TSSOP Packages
**å¼•è„šä¸å°è£…**
<img src="./imgs/0152.jpg" height="auto" width="auto"  title="digit-x">

### æŠŠå­—åº“å†™å…¥AT24C64
*font.cå­—åº“*

```c
const unsigned char F6X8[][6] =    
{
{0x00, 0x00, 0x00, 0x00, 0x00, 0x00},// sp
{0x00, 0x00, 0x00, 0x2f, 0x00, 0x00},// !
{0x00, 0x00, 0x07, 0x00, 0x07, 0x00},// "
{0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14},// #
{0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12},// $
{0x00, 0x62, 0x64, 0x08, 0x13, 0x23},// %
{0x00, 0x36, 0x49, 0x55, 0x22, 0x50},// &
{0x00, 0x00, 0x05, 0x03, 0x00, 0x00},// '
{0x00, 0x00, 0x1c, 0x22, 0x41, 0x00},// (
{0x00, 0x00, 0x41, 0x22, 0x1c, 0x00},// )
{0x00, 0x14, 0x08, 0x3E, 0x08, 0x14},// *
{0x00, 0x08, 0x08, 0x3E, 0x08, 0x08},// +
{0x00, 0x00, 0x00, 0xA0, 0x60, 0x00},// ,
{0x00, 0x08, 0x08, 0x08, 0x08, 0x08},// -
{0x00, 0x00, 0x60, 0x60, 0x00, 0x00},// .
{0x00, 0x20, 0x10, 0x08, 0x04, 0x02},// /
{0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E},// 0
{0x00, 0x00, 0x42, 0x7F, 0x40, 0x00},// 1
{0x00, 0x42, 0x61, 0x51, 0x49, 0x46},// 2
{0x00, 0x21, 0x41, 0x45, 0x4B, 0x31},// 3
{0x00, 0x18, 0x14, 0x12, 0x7F, 0x10},// 4
{0x00, 0x27, 0x45, 0x45, 0x45, 0x39},// 5
{0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30},// 6
{0x00, 0x01, 0x71, 0x09, 0x05, 0x03},// 7
{0x00, 0x36, 0x49, 0x49, 0x49, 0x36},// 8
{0x00, 0x06, 0x49, 0x49, 0x29, 0x1E},// 9
{0x00, 0x00, 0x36, 0x36, 0x00, 0x00},// :
{0x00, 0x00, 0x56, 0x36, 0x00, 0x00},// ;
{0x00, 0x08, 0x14, 0x22, 0x41, 0x00},// <
{0x00, 0x14, 0x14, 0x14, 0x14, 0x14},// =
{0x00, 0x00, 0x41, 0x22, 0x14, 0x08},// >
{0x00, 0x02, 0x01, 0x51, 0x09, 0x06},// ?
{0x00, 0x32, 0x49, 0x59, 0x51, 0x3E},// @
{0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C},// A
{0x00, 0x7F, 0x49, 0x49, 0x49, 0x36},// B
{0x00, 0x3E, 0x41, 0x41, 0x41, 0x22},// C
{0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C},// D
{0x00, 0x7F, 0x49, 0x49, 0x49, 0x41},// E
{0x00, 0x7F, 0x09, 0x09, 0x09, 0x01},// F
{0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A},// G
{0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F},// H
{0x00, 0x00, 0x41, 0x7F, 0x41, 0x00},// I
{0x00, 0x20, 0x40, 0x41, 0x3F, 0x01},// J
{0x00, 0x7F, 0x08, 0x14, 0x22, 0x41},// K
{0x00, 0x7F, 0x40, 0x40, 0x40, 0x40},// L
{0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F},// M
{0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F},// N
{0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E},// O
{0x00, 0x7F, 0x09, 0x09, 0x09, 0x06},// P
{0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E},// Q
{0x00, 0x7F, 0x09, 0x19, 0x29, 0x46},// R
{0x00, 0x46, 0x49, 0x49, 0x49, 0x31},// S
{0x00, 0x01, 0x01, 0x7F, 0x01, 0x01},// T
{0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F},// U
{0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F},// V
{0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F},// W
{0x00, 0x63, 0x14, 0x08, 0x14, 0x63},// X
{0x00, 0x07, 0x08, 0x70, 0x08, 0x07},// Y
{0x00, 0x61, 0x51, 0x49, 0x45, 0x43},// Z
{0x00, 0x00, 0x7F, 0x41, 0x41, 0x00},// [
{0x00, 0x55, 0x2A, 0x55, 0x2A, 0x55},// 55
{0x00, 0x00, 0x41, 0x41, 0x7F, 0x00},// ]
{0x00, 0x04, 0x02, 0x01, 0x02, 0x04},// ^
{0x00, 0x40, 0x40, 0x40, 0x40, 0x40},// _
{0x00, 0x00, 0x01, 0x02, 0x04, 0x00},// '
{0x00, 0x20, 0x54, 0x54, 0x54, 0x78},// a
{0x00, 0x7F, 0x48, 0x44, 0x44, 0x38},// b
{0x00, 0x38, 0x44, 0x44, 0x44, 0x20},// c
{0x00, 0x38, 0x44, 0x44, 0x48, 0x7F},// d
{0x00, 0x38, 0x54, 0x54, 0x54, 0x18},// e
{0x00, 0x08, 0x7E, 0x09, 0x01, 0x02},// f
{0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C},// g
{0x00, 0x7F, 0x08, 0x04, 0x04, 0x78},// h
{0x00, 0x00, 0x44, 0x7D, 0x40, 0x00},// i
{0x00, 0x40, 0x80, 0x84, 0x7D, 0x00},// j
{0x00, 0x7F, 0x10, 0x28, 0x44, 0x00},// k
{0x00, 0x00, 0x41, 0x7F, 0x40, 0x00},// l
{0x00, 0x7C, 0x04, 0x18, 0x04, 0x78},// m
{0x00, 0x7C, 0x08, 0x04, 0x04, 0x78},// n
{0x00, 0x38, 0x44, 0x44, 0x44, 0x38},// o
{0x00, 0xFC, 0x24, 0x24, 0x24, 0x18},// p
{0x00, 0x18, 0x24, 0x24, 0x18, 0xFC},// q
{0x00, 0x7C, 0x08, 0x04, 0x04, 0x08},// r
{0x00, 0x48, 0x54, 0x54, 0x54, 0x20},// s
{0x00, 0x04, 0x3F, 0x44, 0x40, 0x20},// t
{0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C},// u
{0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C},// v
{0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C},// w
{0x00, 0x44, 0x28, 0x10, 0x28, 0x44},// x
{0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C},// y
{0x00, 0x44, 0x64, 0x54, 0x4C, 0x44},// z
{0x14, 0x14, 0x14, 0x14, 0x14, 0x14}// horiz lines
};

const unsigned char  F8X16[][16]=   
{
  {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},// 0
  {0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00},//! 1
  {0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//" 2
  {0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00},//# 3
  {0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00},//$ 4
  {0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00},//% 5
  {0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10},//& 6
  {0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//' 7
  {0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00},//( 8
  {0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00},//) 9
  {0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00},//* 10
  {0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00},//+ 11
  {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00},//, 12
  {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01},//- 13
  {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00},//. 14
  {0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00},/// 15
  {0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00},//0 16
  {0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},//1 17
  {0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00},//2 18
  {0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00},//3 19
  {0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00},//4 20
  {0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00},//5 21
  {0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00},//6 22
  {0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00},//7 23
  {0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00},//8 24
  {0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00},//9 25
  {0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00},//: 26
  {0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00},//; 27
  {0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00},//< 28
  {0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00},//= 29
  {0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00},//> 30
  {0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00},//? 31
  {0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00},//@ 32
  {0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20},//A 33
  {0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00},//B 34
  {0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00},//C 35
  {0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00},//D 36
  {0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00},//E 37
  {0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00},//F 38
  {0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00},//G 39
  {0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20},//H 40
  {0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},//I 41
  {0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00},//J 42
  {0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00},//K 43
  {0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00},//L 44
  {0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00},//M 45
  {0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00},//N 46
  {0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00},//O 47
  {0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00},//P 48
  {0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00},//Q 49
  {0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20},//R 50
  {0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00},//S 51
  {0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00},//T 52
  {0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00},//U 53
  {0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00},//V 54
  {0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00},//W 55
  {0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20},//X 56
  {0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00},//Y 57
  {0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00},//Z 58
  {0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00},//[ 59
  {0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00},//\ 60
  {0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00},//] 61
  {0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//^ 62
  {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80},//_ 63
  {0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//` 64
  {0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20},//a 65
  {0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00},//b 66
  {0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00},//c 67
  {0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20},//d 68
  {0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00},//e 69
  {0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},//f 70
  {0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00},//g 71
  {0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20},//h 72
  {0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},//i 73
  {0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00},//j 74
  {0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00},//k 75
  {0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00},//l 76
  {0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F},//m 77
  {0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20},//n 78
  {0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00},//o 79
  {0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00},//p 80
  {0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80},//q 81
  {0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00},//r 82
  {0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00},//s 83
  {0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00},//t 84
  {0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20},//u 85
  {0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00},//v 86
  {0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00},//w 87
  {0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00},//x 88
  {0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00},//y 89
  {0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00},//z 90
  {0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40},//{ 91
  {0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00},//| 92
  {0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00},//} 93
  {0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}//~ 94
};
```
*ä¸»ç¨‹åº*

```c
///richieball 2018-05-01
extern const unsigned char F6X8[][6];
extern const unsigned char F8X16[][16];

#include <Wire.h>
#define disk 0x50 
int n=0;

void setup() {
  Serial.begin(9600);
  int i,j;
  Wire.begin(); // join i2c bus (address optional for master)
  
//  for(i=0;i<92;i++)for(j=0;j<6;j++) {
//    AT24C64_WriteByte(disk,i*6+j,F6X8[i][j]);  //å†™å…¥å­—åº“F6X8ï¼Œèµ·å§‹åœ°å€0
//    //Serial.println(F6X8[i][j],HEX);
//    //delay(100);
//  }
//  //552
//  for(i=0;i<20;i++){
//    char temp=AT24C64_ReadByte(disk,i);//è¯»å–å­—åº“F6X8      
//    Serial.println(temp,HEX);  //å‘é€è‡³ä¸²å£
//    delay(100);
//  }  
 
  for(i=0;i<95;i++)for(j=0;j<16;j++) AT24C64_WriteByte(disk,1000+i*16+j,F8X16[i][j]);  //å†™å…¥å­—åº“F8X16ï¼Œèµ·å§‹åœ°å€1000 
  for(i=0;i<30;i++){
    char temp=AT24C64_ReadByte(disk,1000+i);  //è¯»å–å­—åº“F8X16       
    Serial.println(temp,HEX);  //å‘é€è‡³ä¸²å£
    delay(100);
  }
  /*
   unsigned int address = 0;
   AT24C64_WriteByte(disk, address, 123);
   Serial.print(AT24C64_ReadByte(disk, address), DEC); 
*/
}

byte x = 0;

void loop() {

}

void AT24C64_WriteByte(int slave_addr,unsigned int addr,unsigned int dat){  
    //byte rdata = 0xFF;
    Wire.beginTransmission(slave_addr); 
    Wire.write(addr >> 8);   //å†™å…¥ä»å™¨ä»¶å†…å­˜åœ°å€é«˜å­—èŠ‚
    Wire.write(addr & 0xFF); //å†™å…¥ä»å™¨ä»¶å†…å­˜åœ°å€ä½å­—èŠ‚
    Wire.write(dat);  //å†™å…¥1ä¸ªå­—èŠ‚æ•°æ®
    Wire.endTransmission(); 
    delay(5);
}

byte AT24C64_ReadByte(int slave_addr,unsigned int addr){
    byte rdata = 0xFF;
    Wire.beginTransmission(slave_addr);  //å‘é€è‡³å­å™¨ä»¶slave_addråœ°å€(Wireåº“ä¸­ï¼Œå­åœ°å€å‡å³ç§»1ä½)
    Wire.write(addr >> 8); // å­å™¨ä»¶å†…å­˜åœ°å€MSBé«˜å­—èŠ‚
    Wire.write(addr & 0xFF); // å­å™¨ä»¶å†…å­˜åœ°å€LSBä½å­—èŠ‚
    Wire.endTransmission();  //åœæ­¢ä¼ é€
    Wire.requestFrom(slave_addr,1);  //ä»å­å™¨ä»¶åœ°å€è¯»å–1å­—èŠ‚
    if (Wire.available()) rdata = Wire.read();  //è¯»å–æŒ‡å®šå­å™¨ä»¶æŒ‡å®šå†…å­˜åœ°å€æ•°æ®
    return rdata;
}

void IIC_Write_CMD(byte cmd){
   Wire.beginTransmission(0x78>>1);  //å­å™¨ä»¶åœ°å€å³ç§»ä¸€ä½
   Wire.write(0x00);  
   Wire.write(cmd); 
   Wire.endTransmission();
}

void IIC_Write_DAT(byte dat){
   Wire.beginTransmission(0x78>>1);
   Wire.write(0x40); 
   Wire.write(dat); 
   Wire.endTransmission();
}

```
> æ³¨æ„ï¼Œå› ä¸ºå—åˆ°Atmega328å­˜å‚¨å®¹é‡çš„é™åˆ¶ï¼Œåœ¨å°†å­—åº“å†™å…¥åˆ°AT24C64æ—¶ï¼Œæ˜¯å°†ä¸¤ç»„æ•°ç»„ï¼ŒF6X8[][6]å’ŒF8X16[][16]åˆ†åˆ«å†™å…¥ï¼Œä¸€ä¸ªå†™å…¥åˆ°åœ°å€ä¸º0çš„å¼€å§‹ä½ç½®ï¼Œå¦ä¸€ä¸ªå†™å…¥åˆ°åœ°å€ä¸º1000å¼€å§‹çš„ä½ç½®ã€‚å…³äºè¯»å†™AT24C64å¯ä»¥å‚è€ƒå®˜æ–¹æ‰‹å†Œã€‚äº¦å¯ä»¥ç›´æ¥å¤ç”¨ä¸Šè¿°ä»£ç ã€‚

## OLEDæ˜¾ç¤ºå±
è¯»å–æ¨¡æ‹Ÿç«¯ä¸¤åªå…‰æ•ç”µé˜»çš„æ•°æ®ï¼Œå¹¶å°†è¯¥æ•°æ®é€å…¥OLEDæ˜¾ç¤ºå±æ˜¾ç¤ºï¼Œæ–‡å­—ä»AT24C64ä¸­è¯»å…¥ã€‚å…¶ä¸­OLEDæ˜¾ç¤ºå±å’ŒAT24C64å‡ä¸ºiiCé€šä¿¡ã€‚æ­¤æ—¶å› ä¸ºAT24C64å†…éƒ¨æ— ä¸Šæ‹‰ç”µé˜»ï¼Œå› æ­¤åœ¨ç”µè·¯è®¾è®¡æ—¶ï¼Œéœ€è¦åœ¨SCLå’ŒSDAå¼•è„šå¢åŠ ä¸¤åª10kä¸Šæ‹‰ç”µé˜»ã€‚
**ç”µè·¯å›¾**
<img src="./imgs/0153.jpg" height="auto" width="auto"  title="digit-x">

**å®é™…æ­å»º**
<img src="./imgs/0154.jpg" height="auto" width="auto"  title="digit-x">

**ç¨‹åº**

```c
//richieball 2016-10-10
//modified by richieball 2018-05-01
#include <Wire.h>  //åŒ…å«Arduinoçš„TWIåº“
//#define uchar unsigned char
//#define uint unsigned int
#define disk 0x50 

void IIC_Write_CMD(byte cmd);
void IIC_Write_DAT(byte dat);
void OLED_init();
void fill(byte dat);
void OLED_PosSet(unsigned char x,unsigned char y);
void OLED_Clr();
byte AT24C64_ReadByte(int slave_addr,unsigned int addr);
void OLED_ShowChar(int x,int y,unsigned char chr,int chrSize);
void OLED_ShowString(int x,int y,unsigned char *chr,int charSize);
unsigned int oled_pow(unsigned char m,unsigned char n);
void OLED_ShowNum(unsigned char x,unsigned char y,unsigned int num,unsigned int len,unsigned char NUMsize);

#define Max_Column 128  //OLEDçš„åˆ—æ•°ï¼Œæ§åˆ¶æ˜¾ç¤ºå±æ¨ªå‘æ˜¾ç¤ºçš„èŒƒå›´
unsigned char temp;
unsigned int i;

const int leftPhotoresistance=2;  //å…‰æ•ç”µé˜»1æ¥å…¥æ¨¡æ‹Ÿå¼•è„š2
const int rightPhotoresistance=3;  //å…‰æ•ç”µé˜»2æ¥å…¥æ¨¡æ‹Ÿå¼•è„š3
const int minPwm=128;  //è®¾ç½®æ˜ å°„èŒƒå›´æœ€å°ï¼Œåœ¨DCç”µæœºéƒ¨åˆ†ä¼šè¿›ä¸€æ­¥é€šè¿‡æ§åˆ¶èŒƒå›´è°ƒæ•´è½¬é€Ÿ
const int maxPwm=256;  //è®¾ç½®æ˜ å°„èŒƒå›´æœ€å¤§

void setup() {  //åŒmain()å‡½æ•°éƒ¨åˆ†ï¼Œä½†åˆ†ç¦»å‡ºwhile(1){ }éƒ¨åˆ†
  Wire.begin();  //å¯åŠ¨TWI
  Serial.begin(9600);  //å¯åŠ¨ä¸²å£ï¼Œç›‘è§†  
  OLED_init();    //åˆå§‹åŒ–OLEDæ¶²æ™¶å±
  
  OLED_Clr();  //æ¸…å±
  OLED_ShowString(28,6,"MuBenTECH",6);
  OLED_ShowString(0,0,"LPRVal:",16);
  OLED_ShowString(0,3,"RPRVal:",16);
  
}

void loop() {  //å³main()å‡½æ•°while(1){ }éƒ¨åˆ†
  int leftPhotoR=analogRead(leftPhotoresistance);  //è¯»å…¥å…‰æ•ç”µé˜»1çš„å€¼
  int mapLeftPhotoR=map(leftPhotoR,0,1023,minPwm,maxPwm);  //å°†è¯»å…¥å…‰æ•ç”µé˜»1çš„å€¼æ˜ å°„åœ¨æŒ‡å®šèŒƒå›´
  int rightPhotoR=analogRead(rightPhotoresistance);  //è¯»å…¥å…‰æ•ç”µé˜»2çš„å€¼
  int mapRightPhotoR=map(rightPhotoR,0,1023,minPwm,maxPwm);  //å°†è¯»å…¥å…‰æ•ç”µé˜»2çš„å€¼æ˜ å°„åœ¨æŒ‡å®šèŒƒå›´
  
  OLED_ShowNum(55,1,mapLeftPhotoR,3,6);  //åœ¨OLEDå±ä¸Šæ˜¾ç¤ºå…‰æ•ç”µé˜»1æ˜ å°„åçš„å€¼
  OLED_ShowNum(55,4,mapRightPhotoR,3,6); //åœ¨OLEDå±ä¸Šæ˜¾ç¤ºå…‰æ•ç”µé˜»2æ˜ å°„åçš„å€¼
  //OLED_ShowNum(55,1,leftPhotoR,3,6);
  //OLED_ShowNum(55,4,rightPhotoR,3,6);
  delay(500);
}

byte AT24C64_ReadByte(int slave_addr,unsigned int addr){
    byte rdata = 0xFF;
    Wire.beginTransmission(slave_addr);  //å‘é€è‡³å­å™¨ä»¶slave_addråœ°å€(Wireåº“ä¸­ï¼Œå­åœ°å€å‡å³ç§»1ä½)
    Wire.write(addr >> 8); // å­å™¨ä»¶å†…å­˜åœ°å€MSBé«˜å­—èŠ‚
    Wire.write(addr & 0xFF); // å­å™¨ä»¶å†…å­˜åœ°å€LSBä½å­—èŠ‚
    Wire.endTransmission();  //åœæ­¢ä¼ é€
    Wire.requestFrom(slave_addr,1);  //ä»å­å™¨ä»¶åœ°å€è¯»å–1å­—èŠ‚
    if (Wire.available()) rdata = Wire.read();  //è¯»å–æŒ‡å®šå­å™¨ä»¶æŒ‡å®šå†…å­˜åœ°å€æ•°æ®
    return rdata;
}

void IIC_Write_CMD(byte cmd){
   Wire.beginTransmission(0x78>>1);  //å­å™¨ä»¶åœ°å€å³ç§»ä¸€ä½
   Wire.write(0x00);  
   Wire.write(cmd); 
   Wire.endTransmission();
}

void IIC_Write_DAT(byte dat){
   Wire.beginTransmission(0x78>>1);
   Wire.write(0x40); 
   Wire.write(dat); 
   Wire.endTransmission();
}

void OLED_init(){
  IIC_Write_CMD(0xAE);   
  IIC_Write_CMD(0x20);  
  IIC_Write_CMD(0x10);  
  IIC_Write_CMD(0xb0);  
  IIC_Write_CMD(0xc8);  
  IIC_Write_CMD(0x00);
  IIC_Write_CMD(0x10);
  IIC_Write_CMD(0x40);
  IIC_Write_CMD(0x81);
  IIC_Write_CMD(0xdf);
  IIC_Write_CMD(0xa1);
  IIC_Write_CMD(0xa6);
  IIC_Write_CMD(0xa8);
  IIC_Write_CMD(0x3F);
  IIC_Write_CMD(0xa4);
  IIC_Write_CMD(0xd3);
  IIC_Write_CMD(0x00);
  IIC_Write_CMD(0xd5);
  IIC_Write_CMD(0xf0);
  IIC_Write_CMD(0xd9);
  IIC_Write_CMD(0x22); 
  IIC_Write_CMD(0xda);
  IIC_Write_CMD(0x12);
  IIC_Write_CMD(0xdb);
  IIC_Write_CMD(0x20);
  IIC_Write_CMD(0x8d);
  IIC_Write_CMD(0x14);
  IIC_Write_CMD(0xaf);  
}

void OLED_PosSet(unsigned char x,unsigned char y){
  IIC_Write_CMD(0xB0+y);
  IIC_Write_CMD(((x&0xF0)>>4)|0x10);
  IIC_Write_CMD(x&0x0F);
}

void OLED_Clr(){
  unsigned char i,j;
  for(i=0;i<8;i++){
  IIC_Write_CMD(0xB0+i);
  IIC_Write_CMD(0x00);
  IIC_Write_CMD(0x10);
  for(j=0;j<128;j++) IIC_Write_DAT(0);
  }
}

void fill(byte dat){
  unsigned char x,y;
  for(y=0;y<8;y++){
      IIC_Write_CMD(0xb0+y);
      IIC_Write_CMD(0x0);
      IIC_Write_CMD(0x10);
      for(x=0;x<128;x++){
          IIC_Write_DAT(dat);
        }
    }
}

void OLED_ShowChar(int x,int y,unsigned char chr,int chrSize){
  int j=0,i=0;
  j=chr-' ';
  if(x>Max_Column-1){x=0;y=y+2;}
  if(chrSize==16){  
    OLED_PosSet(x,y);
    for(i=0;i<8;i++) IIC_Write_DAT(AT24C64_ReadByte(disk,1000+j*16+i));
    OLED_PosSet(x,y+1);
    for(i=0;i<8;i++) IIC_Write_DAT(AT24C64_ReadByte(disk,1000+j*16+i+8));
  }else{
    OLED_PosSet(x,y);
    for(i=0;i<6;i++)
    IIC_Write_DAT(AT24C64_ReadByte(disk,j*6+i));              
  }
}

void OLED_ShowString(int x,int y,unsigned char *chr,int charSize){
  int j=0;
  while(chr[j]!='\0'){
    OLED_ShowChar(x,y,chr[j],charSize);
    x+=8;
    if(x>120){x=0;y+=2;}
    j++;
  }
}

unsigned int oled_pow(unsigned char m,unsigned char n){
  unsigned int result=1;   
  while(n--)result*=m;    
  return result;
} 

void OLED_ShowNum(unsigned char x,unsigned char y,unsigned int num,unsigned int len,unsigned char NUMsize){
  unsigned char t,temp,EnShow=0;
  for(t=0;t<len;t++){
    temp=(num/oled_pow(10,len-t-1))%10;
    if(EnShow==0&&t<(len-1)){
      if(temp==0){
        OLED_ShowChar(x+(NUMsize)*t,y,' ',NUMsize);
        continue;       
      }else EnShow=1; 
    }
    OLED_ShowChar(x+(NUMsize)*t,y,temp+'0',NUMsize);
  }
}
```
> å¤„ç†ä½¿ç”¨ä¸Šè¿°ç¨‹åºå¤–ï¼Œä¹Ÿå¯ä»¥ä»Arduinoåº“ä¸­è‡ªè¡Œæœç´¢æ”¯æŒçš„åº“ï¼Œä¾‹å¦‚Adafruit SSD1306åº“ã€‚ä½†æ˜¯æ­¤åº“å¦‚æœåœ¨Atmega328ä¸‹ä½¿ç”¨ï¼Œå°†å å»è¾ƒå¤§å­˜å‚¨å®¹é‡ï¼Œä¸€ç§æ–¹æ³•æ—¶æ›´å¥½Arduinoå…¶å®ƒå®¹é‡å¤§çš„æ¿å­ï¼ŒäºŒæ˜¯ä½¿ç”¨æœ¬æ¬¡å®éªŒçš„ç¨‹åºï¼Œé…åˆå¤–ç½®å­˜å‚¨å™¨è§£å†³å­˜å‚¨å®¹é‡é—®é¢˜ã€‚

## Tiny RTC I2Cå¯å……ç”µç”µæ± DS1307èŠ¯ç‰‡æ—¶é’Ÿæ¨¡å—
éœ€è¦å®‰è£…ä¸‰ä¸ªåº“ï¼Œ[ä»æ­¤å¤„ä¸‹è½½](http://playground.arduino.cc/Code/Time)è§£å‹åå¤åˆ¶åˆ°arduino-1.8.5\librariesï¼ŒTime, TimeAlarms, å’Œ DS1307RTC ã€‚
<img src="./imgs/0155.jpg" height="auto" width="auto"  title="digit-x">

æ­¤å¤„ä¸ºDS1307RTCåº“ç¤ºä¾‹ä»£ç ï¼Œæœªä½œä¿®æ”¹ï¼Œå¤åˆ¶äºæ­¤ï¼Œæ–¹ä¾¿æŸ¥è¯¢ã€‚
*SetTime*

```c
#include <Wire.h>
#include <TimeLib.h>
#include <DS1307RTC.h>

const char *monthName[12] = {
  "Jan", "Feb", "Mar", "Apr", "May", "Jun",
  "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
};

tmElements_t tm;

void setup() {
  bool parse=false;
  bool config=false;

  // get the date and time the compiler was run
  if (getDate(__DATE__) && getTime(__TIME__)) {
    parse = true;
    // and configure the RTC with this info
    if (RTC.write(tm)) {
      config = true;
    }
  }

  Serial.begin(9600);
  while (!Serial) ; // wait for Arduino Serial Monitor
  delay(200);
  if (parse && config) {
    Serial.print("DS1307 configured Time=");
    Serial.print(__TIME__);
    Serial.print(", Date=");
    Serial.println(__DATE__);
  } else if (parse) {
    Serial.println("DS1307 Communication Error :-{");
    Serial.println("Please check your circuitry");
  } else {
    Serial.print("Could not parse info from the compiler, Time=\"");
    Serial.print(__TIME__);
    Serial.print("\", Date=\"");
    Serial.print(__DATE__);
    Serial.println("\"");
  }
}

void loop() {
}

bool getTime(const char *str)
{
  int Hour, Min, Sec;

  if (sscanf(str, "%d:%d:%d", &Hour, &Min, &Sec) != 3) return false;
  tm.Hour = Hour;
  tm.Minute = Min;
  tm.Second = Sec;
  return true;
}

bool getDate(const char *str)
{
  char Month[12];
  int Day, Year;
  uint8_t monthIndex;

  if (sscanf(str, "%s %d %d", Month, &Day, &Year) != 3) return false;
  for (monthIndex = 0; monthIndex < 12; monthIndex++) {
    if (strcmp(Month, monthName[monthIndex]) == 0) break;
  }
  if (monthIndex >= 12) return false;
  tm.Day = Day;
  tm.Month = monthIndex + 1;
  tm.Year = CalendarYrToTm(Year);
  return true;
}
```
*ReadTest*

```c
#include <Wire.h>
#include <TimeLib.h>
#include <DS1307RTC.h>

void setup() {
  Serial.begin(9600);
  while (!Serial) ; // wait for serial
  delay(200);
  Serial.println("DS1307RTC Read Test");
  Serial.println("-------------------");
}

void loop() {
  tmElements_t tm;

  if (RTC.read(tm)) {
    Serial.print("Ok, Time = ");
    print2digits(tm.Hour);
    Serial.write(':');
    print2digits(tm.Minute);
    Serial.write(':');
    print2digits(tm.Second);
    Serial.print(", Date (D/M/Y) = ");
    Serial.print(tm.Day);
    Serial.write('/');
    Serial.print(tm.Month);
    Serial.write('/');
    Serial.print(tmYearToCalendar(tm.Year));
    Serial.println();
  } else {
    if (RTC.chipPresent()) {
      Serial.println("The DS1307 is stopped.  Please run the SetTime");
      Serial.println("example to initialize the time and begin running.");
      Serial.println();
    } else {
      Serial.println("DS1307 read error!  Please check the circuitry.");
      Serial.println();
    }
    delay(9000);
  }
  delay(1000);
}

void print2digits(int number) {
  if (number >= 0 && number < 10) {
    Serial.write('0');
  }
  Serial.print(number);
}
```